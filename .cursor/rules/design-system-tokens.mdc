---
description: Definitive Quelle für ShadCN/TweakCN Design Tokens. Muss bei jeder UI-Generierung angewendet werden.
globs: ["**/*.tsx", "**/*.ts", "**/*.jsx", "**/*.js", "**/*.css"]
alwaysApply: true
---

# Design System Token Governance

Du bist ein Senior Frontend Architekt, spezialisiert auf ShadCN UI und Tailwind CSS v4. Dein Ziel ist es, strikte visuelle Konsistenz durch die ausschließliche Nutzung definierter Design-Tokens zu gewährleisten.

## 1. Das Verbot von "Magic Values"

Es ist **strengstens untersagt**, hardcodierte Werte oder Standard-Tailwind-Farben zu verwenden.

### VERBOTEN (führt zu Theme-Inkompatibilität):
- `bg-blue-500`, `text-red-600`, `border-gray-200` (Standard-Tailwind-Farben)
- `text-[#333]`, `bg-[#ff0000]` (Hex-Werte)
- `w-[350px]`, `h-[123px]` (Arbitrary Sizing)
- `rounded-[4px]`, `rounded-[8px]` (Arbitrary Radii)
- `p-[17px]`, `m-[23px]`, `gap-[13px]` (Arbitrary Spacing)
- `text-[13px]`, `text-[18px]` (Arbitrary Font-Sizes)

### ERLAUBT:
- Nur die unten definierten semantischen Tokens

---

## 2. Semantische Farb-Matrix

Nutze diese Tabelle, um die richtige Farbe für den Kontext zu wählen. **Denke in "Funktionen", nicht in "Farben".**

| Element-Typ | Hintergrund-Klasse | Text-Klasse | Border-Klasse | Erklärung |
|:------------|:-------------------|:------------|:--------------|:----------|
| **Seite/Body** | `bg-background` | `text-foreground` | N/A | Basis der gesamten App |
| **Container/Card** | `bg-card` | `text-card-foreground` | `border-border` | Für abgegrenzte Inhaltsbereiche |
| **Dialog/Modal** | `bg-popover` | `text-popover-foreground` | `border-border` | Für schwebende Elemente |
| **Primär-Aktion** | `bg-primary` | `text-primary-foreground` | N/A | Der wichtigste Button auf dem Screen |
| **Sekundär-Aktion** | `bg-secondary` | `text-secondary-foreground` | N/A | Abbrechen, Zurück, Filter |
| **Destruktiv** | `bg-destructive` | `text-destructive-foreground` | N/A | Löschen, Fehlerzustände |
| **Erfolg** | `bg-success` | `text-success` | N/A | Erfolgreiche Aktionen, positive Status |
| **Warnung** | `bg-warning` | `text-warning` | N/A | Warnungen, Achtung-Hinweise |
| **Info** | `bg-info` | `text-info` | N/A | Informations-Badges, neutrale Status |
| **Metadaten** | `bg-muted` | `text-muted-foreground` | N/A | Tags, unwichtige Hinweise |
| **Interaktiv** | `bg-accent` | `text-accent-foreground` | N/A | Hover-States in Menüs/Tabellen |
| **Inputs** | `bg-transparent` | `text-foreground` | `border-input` | Formularfelder |

### Regel für Hover-Zustände:
- Nutze für interaktive Listen: `hover:bg-accent hover:text-accent-foreground`
- Nutze für Buttons Opazität: `hover:bg-primary/90`

### Chart-Farben:
Für Datenvisualisierungen verwende ausschließlich:
- `bg-chart-1`, `bg-chart-2`, `bg-chart-3`, `bg-chart-4`, `bg-chart-5`

---

## 3. Radius-Governance

Das System verwendet eine dynamische `--radius` Variable (definiert in TweakCN). Nutze **ausschließlich**:

| Klasse | Verwendung | Berechnung |
|:-------|:-----------|:-----------|
| `rounded-sm` | Sehr kleine Elemente (Badges, Checkboxen) | `calc(var(--radius) - 4px)` |
| `rounded-md` | Standard für fast alles (Buttons, Inputs) | `calc(var(--radius) - 2px)` |
| `rounded-lg` | Große Container (Cards, Modals) | `var(--radius)` |
| `rounded-xl` | Besonders große Container | `calc(var(--radius) + 4px)` |
| `rounded-full` | Avatare, Status-Pills, Pill-Buttons | `9999px` |

### VERBOTEN:
- `rounded-2xl`, `rounded-3xl` (nicht definiert)
- `rounded-[8px]`, `rounded-[4px]` (pixelbasierte Werte)

---

## 4. Spacing-Governance (STRIKT)

Dieses Projekt verwendet eine **strikte Spacing-Skala**. Nur folgende Werte sind erlaubt:

### Erlaubte Spacing-Werte:
`0`, `1`, `2`, `4`, `6`, `8`, `12`, `16`, `24`, `32`, `48`, `64`

### Verwendungsempfehlungen:
| Kontext | Empfohlene Werte |
|:--------|:-----------------|
| Kleine Abstände (Icons, Inline) | `gap-1` (4px), `gap-2` (8px) |
| Komponenten-Padding (Buttons) | `p-4` (16px), `px-6 py-2` |
| Card-Padding | `p-6` (24px), `p-8` (32px) |
| Sektions-Abstände | `py-12` (48px), `py-16` (64px) |

### VERBOTEN:
- `p-[17px]`, `m-[23px]`, `gap-[13px]` (Arbitrary Values)
- `p-3`, `m-5`, `gap-7` (nicht in der Skala)

> **Wenn ein Design einen Wert verlangt, der nicht in der Skala ist (z.B. 13px), runde auf den nächsten Skalenwert (12px oder 16px).**

---

## 5. Typografie-Governance

Wir nutzen die Standard Tailwind Scale, aber strikt semantisch.

### Überschriften:
- H1: `text-3xl font-bold tracking-tight text-foreground` oder `text-4xl`
- H2: `text-2xl font-semibold tracking-tight text-foreground`
- H3: `text-xl font-semibold text-foreground`
- H4: `text-lg font-medium text-foreground`

### Body-Text:
- Standard: `text-base text-foreground leading-relaxed`
- Klein: `text-sm text-muted-foreground`
- Winzig: `text-xs text-muted-foreground`

### Code:
- Inline Code: `font-mono text-sm bg-muted px-1 py-0.5 rounded-sm`

### VERBOTEN:
- `text-[13px]`, `text-[18px]` (Arbitrary Font-Sizes)
- `leading-[1.7]` (Arbitrary Line-Heights)
- `tracking-[0.02em]` (Arbitrary Letter-Spacing)

---

## 6. Umgang mit Lücken im System

Wenn eine fachliche Anforderung (z.B. "Warn-Meldung in Orange") nicht durch die existierenden Tokens abgedeckt werden kann:

1. **Erfinde KEINE willkürlichen Werte** (z.B. `text-orange-500`)
2. **Verwende das generischste Token**, das passt (z.B. `text-foreground` oder `text-muted-foreground`)
3. **Füge einen Kommentar hinzu**: `/* MISSING TOKEN: warning/orange needed here */`

Alternativ: Wenn du dazu aufgefordert wirst, das System zu erweitern, generiere den CSS-Variablen-Code für `globals.css` und registriere ihn im `@theme` Block.

---

## 7. Quick Reference

```
Farben:     bg-background, bg-card, bg-primary, bg-secondary, bg-muted, bg-accent, bg-destructive
Status:     bg-success, bg-warning, bg-info (mit text-success, text-warning, text-info)
Text:       text-foreground, text-muted-foreground, text-primary-foreground, etc.
Borders:    border-border, border-input
Ring:       ring-ring
Radii:      rounded-sm, rounded-md, rounded-lg, rounded-xl, rounded-full
Spacing:    0, 1, 2, 4, 6, 8, 12, 16, 24, 32, 48, 64
```

## 8. ESLint-Enforcement

Diese Regeln werden **automatisch** durch ESLint erzwungen:

- **`local/no-hardcoded-tailwind`**: Verbietet `bg-blue-500`, `p-[17px]`, etc.
- **`local/use-design-system-components`**: Verbietet `<button>`, `<input>`, etc.

Verstöße führen zu Build-Fehlern und werden im Pre-Commit Hook geprüft.
