---
alwaysApply: true
---
# Intent

Du arbeitest in einem B2B-App-Boilerplate mit einem **4-Spalten-Layout-System** basierend auf `react-resizable-panels`. Verwende die definierten Shell-Komponenten und den ShellProvider, um Layout-Code zu erzeugen oder zu ändern.

# Core Concepts

- Die App verwendet ein **resizable 4-Spalten-Layout** aus `src/components/shell/`
- Header und Footer sind **floating** innerhalb der Main Area (Spalte 3)
- Spalten können collapsed/expanded werden und speichern ihren Zustand in LocalStorage
- Die zentrale Quelle für das Layout ist `src/components/shell/`

# Die 4 Spalten

| Spalte | Komponente | Breite | Beschreibung |
|--------|------------|--------|--------------|
| 1 | Navbar | 15-25% (kollabierbar auf 4%) | Primäre Navigation, App-Name |
| 2 | Explorer | 15-30% (optional) | Kontext-Browser, Datei-Baum |
| 3 | Main Area | Flexibel (min 30%) | Hauptinhalt mit Header/Footer |
| 4 | Assist | 20-35% (optional) | Hilfe, Chat, Warenkorb |

# Layout-Struktur

```
src/components/shell/
├── AppShell.tsx           # Haupt-Layout mit ResizablePanelGroup
├── shell-context.tsx      # ShellProvider mit LocalStorage-Persistenz
├── Navbar.tsx             # Spalte 1: Primäre Navigation
├── ExplorerPanel.tsx      # Spalte 2: Kontext-Browser
├── AssistPanel.tsx        # Spalte 4: Hilfe/Chat/Warenkorb
├── MainHeader.tsx         # Floating Header (in Spalte 3)
├── MainFooter.tsx         # Floating Footer (in Spalte 3)
├── Breadcrumbs.tsx        # Auto-generierte Breadcrumbs
├── PageContent.tsx        # Standard-Wrapper für Seiteninhalte
├── KeyboardShortcuts.tsx  # Tastaturkürzel (Cmd+B, etc.)
└── index.ts               # Zentrale Exports
```

# Content-Breite (WICHTIG)

Die `PageContent`-Komponente steuert die Content-Breite zentral:

| Property | Default | Beschreibung |
|----------|---------|--------------|
| `maxWidth` | `6xl` | Standard-Breite für alle Seiten |
| `padding` | `lg` | Standard-Padding (`p-8`) |

## Breiten-Schema

```
maxWidth="sm"   → max-w-sm   (384px)   - Modals, kleine Formulare
maxWidth="md"   → max-w-md   (448px)   - Login-Formulare
maxWidth="lg"   → max-w-lg   (512px)   - Fokussierter Content
maxWidth="xl"   → max-w-xl   (576px)   - Artikel, Blog-Posts
maxWidth="2xl"  → max-w-2xl  (672px)   - Dokumentation
maxWidth="4xl"  → max-w-4xl  (896px)   - Breite Formulare
maxWidth="6xl"  → max-w-6xl  (1152px)  - Standard (Default)
maxWidth="full" → max-w-full (100%)    - Dashboards, Tabellen
```

**Regel:** Verwende den Default (`6xl`) für alle neuen Seiten. Ändere nur bei gutem Grund.

# Code Generation Guidelines

## Neue Seiten erstellen

Seiten in der `(shell)/` Route-Group verwenden automatisch das Layout:

```tsx
// app/(shell)/neue-seite/page.tsx
"use client"

import { PageContent } from "@/components/shell"

export default function NeueSeitePage() {
  return (
    <PageContent>
      {/* Content direkt hier - keine zusätzlichen Container! */}
      <div className="space-y-6">
        <h1>Titel</h1>
        <p>Inhalt...</p>
      </div>
    </PageContent>
  )
}
```

## Shell-State verwenden

```tsx
"use client"

import { useShell, useExplorer, useAssist } from "@/components/shell"

function MyComponent() {
  const { navbarCollapsed, toggleNavbar } = useShell()
  const { isOpen: explorerOpen, toggle: toggleExplorer } = useExplorer()
  const { isOpen: assistOpen, toggle: toggleAssist } = useAssist()
  
  return <Button onClick={toggleExplorer}>Explorer toggle</Button>
}
```

## Tastaturkürzel

| Kürzel | Aktion |
|--------|--------|
| `Cmd/Ctrl + B` | Navbar toggle |
| `Cmd/Ctrl + E` | Explorer toggle |
| `Cmd/Ctrl + J` | Assist toggle |

# Naming and Semantics

Verwende für Layout-Regionen nur folgende Begriffe:
- `navbar` - Spalte 1: Primäre Navigation
- `explorer` - Spalte 2: Kontext-Browser  
- `main` - Spalte 3: Hauptinhalt
- `assist` - Spalte 4: Hilfe/Chat
- `header` - Floating Header in Main
- `footer` - Floating Footer in Main

# Breakpoints

| Breakpoint | Bereich | Tailwind-Prefix |
|------------|---------|-----------------|
| Mobile | < 768px | `max-md:` |
| Tablet | 768px - 1023px | `md:max-lg:` |
| Desktop | >= 1024px | `lg:` |

# Documentation

- App Shell Konzept: `docs/03_features/neues_app_shell_konzept.md`
- Design System Governance: `docs/04_knowledge/design-system-governance.md`

# Verboten

- Keine neuen Layout-Strukturen außerhalb von `src/components/shell/` erstellen
- Keine direkten Imports aus `@/components/app-shell/` oder `@/layouts/` (archiviert)
- Keine hardcodierten z-Index-Werte
- **KRITISCH:** Keine eigenen Container in `page.tsx` Dateien erstellen
  - ❌ VERBOTEN: `<div className="mx-auto max-w-4xl">`, `<div className="container">`
  - ❌ VERBOTEN: `<div className="min-h-screen p-8">` mit eigenen Containern
  - ❌ VERBOTEN: `<div className="flex min-h-screen flex-col justify-center">` (vertikale Zentrierung)
  - ❌ VERBOTEN: Verschachtelte `<main>` Tags (PageContent stellt bereits `<main>` bereit)
  - ❌ VERBOTEN: `maxWidth` Props außer bei bewusstem Abweichen vom Standard
  - ✅ ERLAUBT: `<PageContent>` ohne Props (verwendet Defaults)
  - ✅ ERLAUBT: `<div className="space-y-6">` für vertikales Spacing innerhalb von PageContent
  - ✅ ERLAUBT: Shell-Komponenten stellen Layout bereit

## Content-Struktur Best Practice

### Standard-Seiten (Content-Seiten)

```tsx
// ✅ RICHTIG: Einfach und konsistent
<PageContent>
  <div className="space-y-6">
    <PageHeader title="Titel" description="..." />
    <Card>...</Card>
    <Card>...</Card>
  </div>
</PageContent>

// ❌ FALSCH: Überflüssige Verschachtelung
<PageContent maxWidth="6xl">
  <div className="flex min-h-screen flex-col justify-center">
    <div className="mx-auto max-w-3xl">
      ...
    </div>
  </div>
</PageContent>
```

### Zentrierte Seiten (Welcome, Landing)

Für Seiten, die ihren Content zentriert (horizontal + vertikal) darstellen sollen,
aber den Text linksbündig behalten:

```tsx
// ✅ RICHTIG: Zentrierter Block mit linksbündigem Text
<PageContent showBreadcrumbs={false} showAssistActions={false}>
  {/* Zentrierungs-Container */}
  <div className="flex min-h-full flex-col items-center justify-center py-16">
    {/* Content-Block: responsive Breite, linksbündiger Text */}
    <div className="w-full space-y-8 md:w-3/4 lg:w-2/3 xl:w-1/2">
      <h1>Willkommen</h1>
      <p>Linksbündiger Text in einem zentrierten Block...</p>
    </div>
  </div>
</PageContent>
```

**Hinweise:**
- `showBreadcrumbs={false}` und `showAssistActions={false}` für cleanes Welcome-Screen
- Responsive Breiten mit `md:w-3/4 lg:w-2/3 xl:w-1/2` (KEINE `max-w-*` Klassen)
- `min-h-full py-16` für vertikale Zentrierung (KEINE `min-h-[XXvh]` arbitrary values)
- Text bleibt linksbündig (Standard), nur der Block ist zentriert
